<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="color-scheme" content="dark light">
  <title>Premium â€” MiBu</title>
  <style>
    :root {
      --bg: #000000;
      --bg-2: #111111;
      --text: #ffffff;
      --muted: #888888;
      --brand: #ffffff;
      --accent: #cccccc;
      --glass: rgba(255, 255, 255, 0.03);
      --border: rgba(255, 255, 255, 0.08);
      --shadow-strong: 0 8px 32px rgba(0, 0, 0, 0.6);
      --radius: 8px;
      --success: #00d084;
      --premium: #ffd700;
    }

    * { box-sizing: border-box; }

    html, body {
      height: 100%;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    }

    a { color: inherit; text-decoration: none; }

    /* Navigation */
    header {
      position: sticky;
      top: 0;
      z-index: 10;
      backdrop-filter: blur(10px);
      background: rgba(0, 0, 0, 0.8);
      border-bottom: 1px solid var(--border);
    }
    .nav {
      max-width: 1120px;
      margin: 0 auto;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 16px 20px;
    }
    .brand {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      font-weight: 700;
      letter-spacing: 0.3px;
    }
    .brand-logo {
      width: 28px;
      height: 28px;
      border-radius: 4px;
      background: linear-gradient(135deg, #ffffff, #cccccc);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 10px;
      padding: 10px 14px;
      border-radius: 6px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.05);
      color: var(--text);
      transition: all 0.2s ease;
      font-weight: 500;
      cursor: pointer;
    }
    .btn:hover { background: rgba(255,255,255,0.1); border-color: rgba(255,255,255,0.2); }
    .btn-primary {
      background: #ffffff;
      border: none;
      color: #000000;
      font-weight: 600;
    }
    .btn-primary:hover { background: #f0f0f0; }
    .btn-premium {
      background: linear-gradient(135deg, var(--premium), #ffed4e);
      border: none;
      color: #000000;
      font-weight: 700;
      font-size: 16px;
      padding: 14px 24px;
    }
    .btn-premium:hover { 
      background: linear-gradient(135deg, #ffed4e, var(--premium));
      transform: translateY(-1px);
    }

    /* Main Layout */
    main {
      min-height: calc(100vh - 120px);
      padding: 40px 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .premium-container {
      max-width: 600px;
      width: 100%;
      text-align: center;
    }

    .premium-header {
      margin-bottom: 40px;
    }

    .premium-icon {
      font-size: 60px;
      margin-bottom: 20px;
      background: linear-gradient(135deg, var(--premium), #ffed4e);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .premium-title {
      font-size: clamp(32px, 5vw, 48px);
      font-weight: 900;
      letter-spacing: -1px;
      margin: 0 0 16px;
      background: linear-gradient(135deg, var(--text), var(--accent));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .premium-subtitle {
      font-size: 18px;
      color: var(--muted);
      margin: 0 0 32px;
      line-height: 1.5;
    }

    .glass {
      position: relative;
      background: rgba(255,255,255,0.02);
      border: 1px solid var(--border);
      border-radius: 12px;
      box-shadow: var(--shadow-strong);
      overflow: hidden;
    }

    .pricing-card {
      padding: 32px;
      margin-bottom: 32px;
      position: relative;
    }

    .pricing-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 2px;
      background: linear-gradient(90deg, var(--premium), #ffed4e, var(--premium));
    }

    .price {
      font-size: 48px;
      font-weight: 900;
      color: var(--premium);
      margin: 0 0 8px;
    }

    .price-subtitle {
      font-size: 16px;
      color: var(--muted);
      margin: 0 0 24px;
    }

    .features-list {
      list-style: none;
      padding: 0;
      margin: 0 0 32px;
      text-align: center;
    }

    .feature-item {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 12px;
      padding: 12px 0;
      border-bottom: 1px solid var(--border);
    }

    .feature-item:last-child {
      border-bottom: none;
    }

    .feature-icon {
      width: 20px;
      height: 20px;
      color: var(--success);
      flex-shrink: 0;
    }

    .feature-text {
      font-size: 15px;
      line-height: 1.4;
    }

    .payment-section {
      padding: 24px;
      border-top: 1px solid var(--border);
      background: rgba(255,255,255,0.01);
    }

    .payment-methods {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      margin-bottom: 20px;
    }

    @media (max-width: 480px) {
      .payment-methods {
        grid-template-columns: 1fr;
      }
    }

    .payment-method {
      padding: 12px;
      border: 1px solid var(--border);
      border-radius: 8px;
      background: rgba(255,255,255,0.02);
      cursor: pointer;
      transition: all 0.2s ease;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 14px;
    }

    .payment-method:hover {
      border-color: rgba(255,255,255,0.2);
      background: rgba(255,255,255,0.05);
    }

    .payment-method.selected {
      border-color: var(--premium);
      background: rgba(255, 215, 0, 0.1);
    }

    .security-notice {
      margin-top: 16px;
      display: flex;
      align-items: center;
      justify-content: center;
      position: relative;
    }

    .security-icon {
      color: var(--muted);
      cursor: pointer;
      transition: color 0.2s ease;
    }

    .security-icon:hover {
      color: var(--success);
    }

    .security-tooltip {
      position: absolute;
      top: 100%;
      left: 50%;
      transform: translateX(-50%);
      background: var(--bg);
      border: 1px solid var(--border);
      border-radius: 6px;
      padding: 8px 12px;
      font-size: 12px;
      color: var(--text);
      white-space: nowrap;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      margin-top: 8px;
      box-shadow: var(--shadow-strong);
    }

    .security-tooltip::after {
      content: '';
      position: absolute;
      bottom: 100%;
      left: 50%;
      transform: translateX(-50%);
      border: 5px solid transparent;
      border-bottom-color: var(--border);
    }

    .security-notice:hover .security-tooltip {
      opacity: 1;
      visibility: visible;
    }

    .loading {
      display: none;
      margin: 12px 0;
      color: var(--muted);
      font-size: 14px;
    }

    .spinner {
      display: inline-block;
      width: 16px;
      height: 16px;
      border: 2px solid var(--border);
      border-top: 2px solid var(--text);
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-right: 8px;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    .success-message {
      background: rgba(0, 208, 132, 0.1);
      border: 1px solid rgba(0, 208, 132, 0.3);
      border-radius: 8px;
      padding: 16px;
      margin: 20px 0;
      color: var(--success);
      font-size: 14px;
      display: none;
      text-align: center;
    }

    footer {
      text-align: center;
      padding: 20px;
      color: var(--muted);
      font-size: 14px;
      border-top: 1px solid var(--border);
      margin-top: 20px;
    }

    /* Responsive */
    @media (max-width: 600px) {
      main {
        padding: 20px 16px;
      }
      
      .pricing-card {
        padding: 24px 20px;
      }
      
      .premium-title {
        font-size: 32px;
      }
      
      .price {
        font-size: 40px;
      }
    }
  </style>
</head>
<body>
  <header>
    <nav class="nav">
      <a class="brand" href="index.html" aria-label="MiBu Home">
      </a>
      <a class="btn" href="tracker.html">Back to Tracker</a>
    </nav>
  </header>

  <main>
    <div class="premium-container">
      <div class="premium-header">
        <div class="premium-icon">ðŸ‘‘</div>
        <h1 class="premium-title">Unlock Premium Features</h1>
        <p class="premium-subtitle">Get advanced AI-powered insights and bank statement import capabilities</p>
      </div>

      <div class="glass pricing-card">
        <div class="price">â‚¹299</div>
        <div class="price-subtitle">One-time payment â€¢ Lifetime access</div>
        
        <ul class="features-list">
          <li class="feature-item">
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="feature-text">AI-powered spending advisor & insights</span>
          </li>
          <li class="feature-item">
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="feature-text">AI-powered bank statement import</span>
          </li>
          <li class="feature-item">
            <svg class="feature-icon" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
            </svg>
            <span class="feature-text">Export data in multiple formats</span>
          </li>
        </ul>

          
          <button class="btn btn-premium" id="purchaseBtn">
            Upgrade to Premium
          </button>
          <br>
          
          <div class="loading" id="loadingIndicator">
            <div class="spinner"></div>
            Processing payment...
          </div>
          
          <div class="success-message" id="successMessage">
            Congratulations! You are now a premium user.
          </div>
          
          <br><br>
          
          <div class="security-notice">
            <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="security-icon">
              <path fill-rule="evenodd" d="M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
            </svg>
            <div class="security-tooltip">
              Secure payment powered by industry-standard encryption
            </div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <footer>
    Â© <span id="year"></span> MiBu. All rights reserved.
  </footer>

  <script>
    class PremiumPage {
      constructor() {
        this.selectedMethod = 'upi';
        this.init();
      }

      init() {
        this.bindEvents();
        document.getElementById('year').textContent = new Date().getFullYear();
        
        // Check if user is already premium
        if (this.isPremiumUser()) {
          this.redirectToImport();
        }
      }

      bindEvents() {
        // Payment method selection
        document.querySelectorAll('.payment-method').forEach(method => {
          method.addEventListener('click', (e) => {
            document.querySelectorAll('.payment-method').forEach(m => m.classList.remove('selected'));
            e.target.classList.add('selected');
            this.selectedMethod = e.target.dataset.method;
          });
        });

        // Purchase button
        document.getElementById('purchaseBtn').addEventListener('click', () => {
          this.openRazorpayPayment();
        });
      }

      async openRazorpayPayment() {
        try {
          // Load Razorpay script if not already loaded
          if (!window.Razorpay) {
            await this.loadRazorpayScript();
          }

          const options = {
            key: 'rzp_test_1DP5mmOlF5G5ag', // Replace with your Razorpay test key
            amount: 29900, // â‚¹299 in paise
            currency: 'INR',
            name: 'MiBu',
            description: 'Premium Features - Bank Statement Import',
            order_id: '', // This will be generated by your backend
            handler: (response) => {
              this.handlePaymentSuccess(response);
            },
            prefill: {
              name: 'User', // You can get this from auth if available
              email: 'user@example.com', // You can get this from auth if available
              contact: '' // Add phone if available
            },
            notes: {
              address: 'Premium Upgrade',
              user_id: 'anonymous' // You can get this from auth if available
            },
            theme: {
              color: '#000000'
            },
            modal: {
              ondismiss: () => {
                console.log('Payment modal closed');
              }
            }
          };

          const razorpay = new Razorpay(options);
          razorpay.open();

        } catch (error) {
          console.error('Razorpay error:', error);
          alert('Failed to open payment gateway. Please try again.');
        }
      }

      async loadRazorpayScript() {
        return new Promise((resolve, reject) => {
          const script = document.createElement('script');
          script.src = 'https://checkout.razorpay.com/v1/checkout.js';
          script.onload = resolve;
          script.onerror = reject;
          document.head.appendChild(script);
        });
      }

      async handlePaymentSuccess(response) {
        try {
          const purchaseBtn = document.getElementById('purchaseBtn');
          const loadingIndicator = document.getElementById('loadingIndicator');
          const successMessage = document.getElementById('successMessage');

          // Show loading
          purchaseBtn.style.display = 'none';
          loadingIndicator.style.display = 'block';

          // In a real implementation, you would verify the payment on your backend
          // For now, we'll simulate successful verification
          await new Promise(resolve => setTimeout(resolve, 1000));
          
          console.log('Payment successful:', response);
          
          // Set premium status
          localStorage.setItem('mibu-premium', 'true');
          localStorage.setItem('mibu-premium-date', new Date().toISOString());
          localStorage.setItem('mibu-payment-id', response.razorpay_payment_id);
          
          // Show success
          loadingIndicator.style.display = 'none';
          successMessage.style.display = 'block';
          
          // Redirect after 2 seconds
          setTimeout(() => {
            this.redirectToImport();
          }, 2000);
          
        } catch (error) {
          console.error('Payment verification error:', error);
          alert('Payment verification failed. Please contact support.');
          
          // Reset UI
          const purchaseBtn = document.getElementById('purchaseBtn');
          const loadingIndicator = document.getElementById('loadingIndicator');
          purchaseBtn.style.display = 'flex';
          loadingIndicator.style.display = 'none';
        }
      }

      isPremiumUser() {
        return localStorage.getItem('mibu-premium') === 'true';
      }

      redirectToImport() {
        // Redirect to tracker with import modal flag
        window.location.href = 'tracker.html?openImport=true';
      }
    }

    // Initialize premium page
    new PremiumPage();
  </script>
</body>
</html>
